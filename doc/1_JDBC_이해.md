# 1. JDBC 이해


## JDBC의 등장 배경

- 클라이언트(웹 브라우저/모바일 앱) ↔ 애플리케이션 서버 ↔ DB

### 애플리케이션 서버와 DB

- 애플리케이션 서버와 DB가 연결되는 과정
    1. 애플리케이션 서버에서 DB로 TCP/IP를 사용하여 커넥션을 연결한다.
    2. 애플리케이션 서버에서 DB로 SQL을 커넥션을 통해 전달한다.
    3. DB에서는 SQL을 수행하고 그 결과를 애플리케이션 서버에 응답한다.

### 늘 문제는 변경이 일어날 수 있다는 점에서 발생한다..

- 각 데이터베이스마다 커넥션을 연결하는 방법도, SQL을 전달하는 방법, 결과를 응답받는 방법이 모두 다르다.
- 따라서 데이터베이스를 중간에 다른 종류로 변경해야 하는 경우, 기존에 서버에서 사용한 데이터베이스 사용 코드 또한 함께 바꿔주어야 한다.
- 수십개인 데이터베이스의 각각의 다른 점들을 다 일일히 학습해야 한다.

⇒ **`JDBC`**라는 **자바 표준**이 등장..!!!

## JDBC 표준 인터페이스

자바에서 데이터베이스에 접속할 수 있도록 하는 자바 API.

표준을 인터페이스로 정의해놓고, 각각의 구현체들은 DB벤더들이 라이브러리(JDBC 드라이버)로 제공하기 때문에 이제 개발자들은 이 JDBC 표준 인터페이스만 사용하면 된다.

그러면,

1. 중간에 다른 데이터베이스로 변경이 되어도 해당 구현체만 바꿔주고, 데이터베이스와 연관된 애플리케이션 서버의 소스는 표준 인터페이스에 의존하고 있기 때문에 소스 코드를 고치지 않아도 된다.
2. 이제 개발자는 JDBC 표준 인터페이스 사용법만 학습하면 수십개의 데이터베이스에 모두 동일하게 사용할 수 있다.

> **[한계]** </br>
하지만 각각의 DB마다 SQL, 데이터타입 등의 일부 사용법이 다르다. ANSI SQL도 일반적인 부분만 공통화했기 때문에 한계가 있다. </br>
예를 들어 페이징 SQL은 각각의 DB마다 사용법이 다르다. 계층형 쿼리에 사용하는 CONNECT BY PRIOR, START WITH 구문도 오라클에서만 제공하는 구문이다.
>

## JDBC와 최신 데이터 접근 기술

### SQL Mapper와 ORM 기술

애플리케이션에서 JDBC로 직접 SQL을 전달하지 않고, 최근에는 중간에 SQL Mapper나 ORM 기술을 사용하여 더 편리하게 사용하고 있다.

- SQL Mapper
    - 장점
        - SQL 응답 결과를 객체로 편리하게 변환해준다.
        - JDBC의 반복 코드를 제거해준다.
    - 단점
        - 개발자가 SQL을 직접 작성해야 한다.
    - 대표 기술: 스프링 Jdbc Template, MyBatis

- ORM 기술
    - 객체를 관계형 DB 테이블과 매핑해주는 기술이다. (ORM 기술이 개발자 대신에 동적으로 SQL을 만들고 실행한다.)
    - 대표 기술: JPA, 하이버네이트, 이클립스링크
    - JPA는 자바 진영의 ORM 표준 인터페이스이고, 이것을 구현한 것으로 대표적인 것이 하이버네이트이다.


> 📌 위의 SQL Mapper와 ORM 모두 `내부에서는 JDBC를 사용`하고 있기 때문에, JDBC를 직접 사용하지 않더라도 나중에 문제 상황을 해결하기 위해서는 JDBC가 어떻게 동작하는지 기본 원리를 알아두어야 한다!!!

